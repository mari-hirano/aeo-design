---
description: Guidelines for using and extending Spring UI components
globs: 
  - "src/components/designer/layout/**/*.tsx"
  - "src/components/designer/sections/**/*.tsx"
  - "src/components/dashboard/**/*.tsx"
  - "src/app/dashboard/page.tsx"
alwaysApply: true
---
# Spring UI Component Usage

## Purpose & Scope
Always default to the primitives exported from `@/components/spring-ui/*` when building anything in designer, dashboard, or app surfaces. Compose those primitives (or extend them) before introducing bespoke UI so the system stays visually consistent and easier to maintain.

## Component Decision Flow
1. **Does a Spring UI primitive already exist?** Use it.
2. **Can the layout be composed from existing primitives?** Compose it.
3. **Can you extend an existing component instead of creating new API?** Extend it.
4. **Is the need truly unique?** Only then introduce a custom component.


## Available Spring UI Components
Use this list to map common UI needs to the canonical Spring UI primitive. Reference the Pattern Recipes section when a layout needs additional structure.

- `Accordion`: Use for expandable content sections, such as frequently asked questions or additional details.
- `Autocomplete`: Use for multi-select dropdowns with search, such as selecting multiple tags or categories.
- `Avatar`: Use for displaying user or entity pictures. Fall back to initials if a picture is not available.
- `Badge`: Use to highlight new or altered features within the product. It can have a tooltip but is not selectable or interactive.
- `Button`: Use to allow users to take actions, such as saving changes, accepting payments, and creating folders.
    - Use `variant="primary"` for primary actions, `"subtle"` for secondary actions.
    - Use `variant="destructive"` for actions that delete or archive.
    - Use `variant="ghost"` for secondary actions that don't require as much emphasis.
- `Checkbox`: Use for multi-select options, such as selecting multiple items in a list.
- `Icon`: Use for decorative or supplementary visual elements that help explain the UI.
- `IconButton`: Use for icon-only affordances, such as close buttons or chevrons.
- `Input`: Use for text entry, such as search bars or form fields.
- `Link`: Use for navigate to new pages or sections within the same page
- `Modal`: Use for creating dismissable overlays that appear on top of the main content. Prefer over `Popover` when content is the main focus of the page.
- `Note`: Use to inform and/or guide users through a flow or section.
- `Popover`: Use for displaying additional rich content on top of other content. Prefer over `Modal` when the content should be displayed in context with other elements on the page.
- `Radio`: Use for selecting a single option from a list, such as choosing a payment method.
- `Select`: Use for single-choice dropdowns, such as selecting a country or currency.
- `Switch`: Use for binary toggles, such as enabling/disabling notifications.
- `Tag`: Use for items that need to be labeled, categorized, or organized using keywords that describe them. Tags can also be used for dismissible items that exist outside of inputs.
- `Textarea`: Use for multi-line text entry, such as comments or descriptions.
- `Tooltip`: Use to provide additional context or information about a UI element.



## Designer Layout Components
- **Layout components** are located in `@/components/designer/layout/`
- **Section components** are located in `@/components/designer/sections/`
- Examples:
  - `Navbar`, `LeftSidebar`, `Canvas` from [src/components/designer/layout/](mdc:src/components/designer/layout)
  - `CMSSection`, `AppsSection` from [src/components/designer/sections/](mdc:src/components/designer/sections)

## Component Styling Best Practices
- **Use built-in variants**: Leverage component props like `variant="ghost"`, `size="comfortable"`
- **Minimize custom classes**: Only add custom `className` when absolutely necessary
- **Follow established patterns**: Reference existing components for styling consistency
- **Use theme variables**: Apply colors via CSS variables from our theme system

## Pattern Recipes
These are the three layouts that appear most often. Start here before composing anything custom.

### Navigation stacks
- Use for left rails, secondary nav, or any atomic lists.
- Stack `Row` components inside a container with consistent spacing.
```tsx
<div className="space-y-1">
  {sections.map(section => (
    <Row
      key={section.id}
      label={section.label}
      icon={<section.icon size={16} />}
      selected={section.id === current}
      onClick={() => setCurrent(section.id)}
    />
  ))}
</div>
```

### Settings forms
- Use `Row` for copy + description, then attach Spring UI inputs via `suffixButtons`.
- Keep toggles inside Spring primitives (`Switch`, `Select`, etc.).
```tsx
<div className="space-y-4">
  <Row
    label="Email Notifications"
    description="Receive product updates."
    suffixButtons={[
      <Switch key="email" checked={emailEnabled} onCheckedChange={setEmailEnabled} />,
    ]}
  />
  <Row
    label="Workspace visibility"
    description="Control who can discover this site."
    suffixButtons={[
      <Select key="visibility" value={visibility} onValueChange={setVisibility}>
        <SelectTrigger className="w-40">
          <SelectValue placeholder="Choose" />
        </SelectTrigger>
        <SelectContent>
          <SelectItem value="private">Private</SelectItem>
          <SelectItem value="team">Team</SelectItem>
          <SelectItem value="public">Public</SelectItem>
        </SelectContent>
      </Select>,
    ]}
  />
</div>
```

### Data tables
- Use the Spring `Table` primitives and compose cells with badges + dropdown menus for actions.
- `Badge` conveys status; `DropdownMenu` keeps row actions compact.
```tsx
<Table>
  <TableHeader>
    <TableRow>
      <TableHead>Name</TableHead>
      <TableHead>Status</TableHead>
      <TableHead className="w-[80px]">Actions</TableHead>
    </TableRow>
  </TableHeader>
  <TableBody>
    {sites.map(site => (
      <TableRow key={site.id}>
        <TableCell>{site.name}</TableCell>
        <TableCell>
          <Badge variant={site.active ? "green" : "orange"}>
            {site.active ? "Active" : "Draft"}
          </Badge>
        </TableCell>
        <TableCell>
          <DropdownMenu>
            <DropdownMenuTrigger asChild>
              <IconButton variant="ghost" aria-label="Row actions">
                <MoreIcon size={16} />
              </IconButton>
            </DropdownMenuTrigger>
            <DropdownMenuContent align="end">
              <DropdownMenuItem>Edit</DropdownMenuItem>
              <DropdownMenuItem variant="destructive">Archive</DropdownMenuItem>
            </DropdownMenuContent>
          </DropdownMenu>
        </TableCell>
      </TableRow>
    ))}
  </TableBody>
</Table>
```

## Extension & Anti-Patterns
### When to Extend
- Only extend when you must inject extra behavior or wiring while keeping the Spring API intact.
- Always pass through props and reuse Spring helpers like `cn`.
```tsx
import { Button } from "@/components/spring-ui/button"
import { cn } from "@/lib/utils"

export function LoadingButton({ loading, children, className, ...props }) {
  return (
    <Button
      {...props}
      disabled={loading || props.disabled}
      className={cn(loading && "opacity-50", className)}
    >
      {loading ? "Saving…" : children}
    </Button>
  )
}
```

### Common Mistakes to Avoid
- **Custom layout wrappers:** Don't hand-code flex rows/columns for nav or settings; use `Row`.
- **Native inputs with ad-hoc styling:** Use `Input`, `Select`, `Switch`, etc., so validation and spacing stay consistent.
- **Button clones:** Avoid plain `<button>` tags for actions; Spring `Button`/`IconButton` already encode variants, spacing, and focus states.
```tsx
// ❌ Avoid creating bespoke nav items
export function NavItem({ label, icon, selected }) {
  return (
    <div className={`flex items-center gap-2 px-3 py-2 ${selected ? "bg-blue-50" : ""}`}>
      {icon}
      <span>{label}</span>
    </div>
  )
}

// ✅ Use the Row primitive instead
<Row label={label} icon={icon} selected={selected} />
```

## Import Organization
Keep imports organized and use correct paths:
```tsx
// ✅ Correct import structure
import { Button, IconButton } from '@/components/spring-ui/button'
import { Input } from '@/components/spring-ui/input'
import { SettingsIcon, ChevronDownIcon } from '@/icons'
import { SomeUtility } from '@/lib/utils'

// ✅ Designer components
import { Navbar } from '@/components/designer/layout/Navbar'
import { CMSSection } from '@/components/designer/sections/CMSSection'
```

Import order priority:
1. Spring UI components (`@/components/spring-ui/*`)
2. Icons (`@/icons`)
3. Shared utilities (`@/lib/utils`)
4. Designer/layout components (`@/components/designer/*`)
5. Third-party imports (last)

## Integration Notes
- **Color, typography, and spacing tokens** must follow `color-and-text-styling.mdc`.
- **Copy, capitalization, and helper text** follow `content-guidelines.mdc`.
- **Hard-coded asset paths** (images, lottie files, etc.) must respect `asset-base-path.mdc`.
- **Layout patterns**: Reference [src/components/designer/layout/Canvas.tsx](mdc:src/components/designer/layout/Canvas.tsx) for consistent spacing and responsive design.
- **State management**: Use React hooks for local state; follow existing patterns from [src/context](mdc:src/context) for app-wide state.
